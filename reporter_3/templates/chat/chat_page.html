<!-- templates/chat/chat_page.html -->
{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Left Panel: Chat Interface -->
<div class="panel panel-left">
    <div class="panel-content" id="chat-history-container">
        <div id="chat-history" class="d-flex flex-column">
            <!-- Chat messages will be dynamically added here -->
            <div class="chat-message ai-message">Welcome! Paste content, upload files, and tell me what kind of report you need.</div>
        </div>
    </div>
    <div class="panel-footer">
        <form id="chat-form">
            <div id="file-drop-zone">
                <p>Drag & drop files here, or click to select files</p>
                <input type="file" id="file-input" multiple hidden>
                <div id="file-list" class="mt-2"></div>
            </div>
            <div class="row g-2 mb-3">
                <div class="col-md">
                    <label for="model-select" class="form-label">Primary Model</label>
                    <select id="model-select" class="form-select">
                        <!-- Models will be populated by JS -->
                        <option>Loading models...</option>
                    </select>
                </div>
                <div class="col-md">
                    <label for="template-select" class="form-label">Report Template</label>
                    <select id="template-select" class="form-select">
                        <option value="">Custom Report</option>
                        <!-- Templates will be populated by JS -->
                    </select>
                </div>
            </div>
            <textarea id="message-input" class="form-control mb-2" rows="4" placeholder="Paste content or type your request..."></textarea>
            <button id="send-button" type="submit" class="btn btn-primary w-100">Send Request</button>
        </form>
    </div>
</div>

<!-- Right Panel: Report Preview -->
<div class="panel panel-right">
    <div class="d-flex justify-content-between align-items-center p-3 border-bottom bg-light">
        <h5 class="mb-0">Report Preview</h5>
        <div>
            <button class="btn btn-secondary btn-sm">Versions</button>
            <button class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                Export
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Export as PDF</a></li>
                <li><a class="dropdown-item" href="#">Export as DOCX</a></li>
                <li><a class="dropdown-item" href="#">Export as HTML</a></li>
            </ul>
        </div>
    </div>
    <div id="report-preview" class="panel-content">
        <p class="text-muted">Your generated report will appear here in real-time...</p>
    </div>
</div>
{% endblock %}